<div class="page-header">
	<h2>成为注册用户</h2>
</div>

<div class="sm-register-container container-fluid">
	<form class="form-horizontal" name="regForm" novalidate>
		<div class="row form-group">
			<label for="userloginId" class="col-sm-2 control-label">帐号<span class="sm-must-input">*</span></label>
			<div class="col-sm-6">
				<input type="text" class="form-control" name="loginId" ng-blur="checkExists()" id="userloginId" ng-model="user.loginId" placeholder="输入你想要的帐号..." required ng-minlength="8" ng-maxlength="16">
			</div>
			<div class="col-sm-4">
				<span style="color: red" ng-show="regForm.loginId.$dirty && regForm.loginId.$invalid">
					<span ng-show="regForm.loginId.$error.required">✖ 帐号是必须的</span>
					<span ng-show="regForm.loginId.$error.minlength">✖ 帐号最少需要8位</span>
					<span ng-show="regForm.loginId.$error.maxlength">✖ 帐号最多只能16位</span>
				</span>
				<span style="color: red;" ng-show="duplicateLoginId">✖ 该帐号已被占用</span>
				<span style="color: green;font-size: 1.5em;" ng-show="regForm.loginId.$valid && !duplicateLoginId">
					✔
				</span>
			</div>
		</div>
		<div class="row form-group">
			<label for="userName" class="col-sm-2 control-label">用户名<span class="sm-must-input">*</span></label>
			<div class="col-sm-6">
				<input type="text" class="form-control" name="name" id=""userName"" ng-model="user.name" placeholder="设置一个名字..." required ng-minlength="2" ng-maxlength="8">
			</div>
			<div class="col-sm-4">
				<span style="color: red" ng-show="regForm.name.$dirty && regForm.name.$invalid">
					<span ng-show="regForm.name.$error.required">✖ 用户名是必须的</span>
					<span ng-show="regForm.name.$error.minlength">✖ 用户名最少需要2位</span>
					<span ng-show="regForm.name.$error.maxlength">✖ 用户名最多只能8位</span>
				</span>
				<span style="color: green;font-size: 1.5em;" ng-show="regForm.name.$valid">
					✔
				</span>
			</div>
		</div>
		<div class="row form-group">
			<label for="userPassword" class="col-sm-2 control-label">密码<span class="sm-must-input">*</span></label>
			<div class="col-sm-6">
				<input type="password" name="pwd" class="form-control" ng-model="user.password" id="userPassword" placeholder="设置你的密码" required ng-minlength="6" ng-maxlength="32">
			</div>
			<div class="col-sm-4" >
				<span style="color: red" ng-show="regForm.pwd.$dirty && regForm.pwd.$invalid">
					<span ng-show="regForm.pwd.$error.required">✖ 密码是必须的</span>
					<span ng-show="regForm.pwd.$error.minlength">✖ 密码最少需要6位</span>
					<span ng-show="regForm.pwd.$error.maxlength">✖ 密码最最多32位</span>
				</span>
				<span style="color: green;font-size: 1.5em;" ng-show="regForm.pwd.$valid">
					✔
				</span>
			</div>
		</div>
		<div class="row form-group">
			<label for="userPasswordCk" class="col-sm-2 control-label">确认密码<span class="sm-must-input">*</span></label>
			<div class="col-sm-6">
				<input type="password" name="pwd2" class="form-control" ng-model="user.passwordCk" id="userPasswordCk" placeholder="确认你的密码" required>
			</div>
			<div class="col-sm-4" >
				<span style="color: red" ng-show="(regForm.pwd2.$dirty && regForm.pwd2.$invalid)">
					<span ng-show="regForm.pwd2.$error.required">✖必须确认密码</span>
				</span>
				<span style="color:red" ng-show="user.password != user.passwordCk">
					✖两次输入的密码不一致
				</span>
				<span style="color: green;font-size: 1.5em;" ng-show="regForm.pwd2.$valid && user.password == user.passwordCk">
					✔
				</span>
			</div>
		</div>
		<div class="row form-group">
			<label for="userSign" class="col-sm-2 control-label">个性签名</label>
			<div class="col-sm-6">
				<input type="text" class="form-control" name="sign" ng-model="user.sign" id="userSign" placeholder="个性签名" ng-maxlength="32">
			</div>
			<div class="col-sm-4" >
				<span style="color: red" ng-show="regForm.sign.$dirty && regForm.sign.$invalid">
					<span ng-show="regForm.sign.$error.maxlength">✖个性签名最多只能写32个字</span>
				</span>
				<span style="color: green;font-size: 1.5em;" ng-show="regForm.sign.$valid && user.sign.length > 0">
					✔
				</span>
			</div>
		</div>
		<div class="row form-group">
			<label for="userPhone" class="col-sm-2 control-label">手机号码</label>
			<div class="col-sm-6">
				<input type="password" class="form-control" name="phone" ng-model="user.phone" id="userPhone" placeholder="输入你的手机号码" ng-pattern="/^1[3|4|5|8][0-9]\d{8}$/">
			</div>
			<div class="col-sm-4" >
				<span style="color: red" ng-show="regForm.phone.$dirty && regForm.phone.$invalid">
					<span ng-show="regForm.phone.$error.pattern">✖手机号码格式错误</span>
				</span>
				<span style="color: green;font-size: 1.5em;" ng-show="regForm.phone.$valid && user.phone.length > 0">
					✔
				</span>
			</div>
		</div>
		<div class="row form-group">
			<label for="userEmail" class="col-sm-2 control-label">邮箱</label>
			<div class="col-sm-6">
				<input type="email" class="form-control" name="email" ng-model="user.email" id="userEmail" placeholder="输入你的邮箱" ng-pattern="/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/">
			</div>
			<div class="col-sm-4" >
				<span style="color:red" ng-show="regForm.email.$dirty && regForm.email.$invalid">
				  <span ng-show="regForm.email.$error.pattern">✖非法的邮箱。</span>
				 </span>
				 <span style="color: green;font-size: 1.5em;" ng-show="regForm.email.$valid && user.email.length > 0">
					✔
				</span>
			</div>
		</div>
		<div class="row form-group">
			<label for="userJcaptchaCode" class="col-sm-2 control-label">验证码<span class="sm-must-input">*</span></label>
			<div class="col-sm-3">
				<input type="text" class="form-control" name="captchaCode" ng-change="captchaErr = false" ng-model="user.jcaptchaCode" id="userJcaptchaCode" placeholder="输入验证码" required>
			</div>
			<div class="col-sm-3">
				<div class="sm-jcaptcha-container">
					<img ng-src="{{baseUrl}}/jcaptcha/get?_={{time}}" width="100%" height="100%" />
				</div>
			</div>
			<div class="col-sm-2">
				<a href="javascript:void(0)" ng-click="reGetJcaptcha('userJcaptchaCode')" style="font-size: 12px;">看不清,换一张</a>
			</div>
			<div class="col-sm-2">
				<span style="color:red" ng-if="regForm.captchaCode.$dirty && regForm.captchaCode.$invalid">
					<span ng-if="regForm.captchaCode.$error.required">✖验证码必填</span>
				</span>
				<span style="color:red" ng-if="captchaErr" >
					✖验证码错误
				</span>
				<span style="color: green;font-size: 1.5em;" ng-show="!captchaErr && regForm.captchaCode.$valid && user.jcaptchaCode.length > 0">
					✔
				</span>
			</div>
		</div>
		<div class="row form-group">
			<div class="col-sm-offset-4 col-sm-10">
				<button type="button" class="btn btn-info" ng-disabled="!(!duplicateLoginId && regForm.loginId.$valid && regForm.name.$valid && regForm.pwd.$valid && regForm.pwd2.$valid && user.password == user.passwordCk && regForm.sign.$valid && regForm.phone.$valid && regForm.email.$valid && regForm.captchaCode.$valid && !captchaErr)" ng-click="doRegister()">注册</button>
			</div>
		</div>
	</form>
</div>